---
title: 跨越半个世纪的时间 - 来点亮一只辉光管
date: 2021-03-25 10:05:52
tags: 辉光钟
cover: https://www.daliborfarny.com/wp-content/uploads/2016/11/LKJ0771_1280.jpg
---

这是一个系列文章，我会在文末列出目录
> Warning：高压危险。~~但也不那么危险~~

辉光管的原理很简单，一根管子有11根（或更多）引脚。只需要向一根提供一个 170v 的电压，剩下的 10 根分别接数字 0-9，哪一根形成通路就亮那一个数字。  
这是我们的理论基础，想要实现控制这跟管子，我们需要还需要一个单片机，Arduino、Esp32、树莓派 都可以，本章我就用树莓派作为的示例来演示。

## Get start
在你用任意一个单片机做出 LED 流水灯的效果之后就可以想到这样的线路大概该怎么接：提供一个电压给辉光管阳极，用几个高压三极管控制 0-9 之间的引脚接地即可。但有一个问题，我们总不能用单片机11个引脚去接辉光管吧，那这里就要引入一个新的控制模块。市场上专为控制辉光管而生产的芯片有两种：K155ID1 和 74141 芯片。现在广泛使用的是 K155ID1，可以用 4 个引脚去控制其他 10 根引脚的开关，而且同时只会有一个形成通路。辉光管我们使用国产的 QS-30 ~~别问为什么不用苏联产，问就是买不起~~


![图为 K1555ID1 示意图，当前市场价为 15￥/个][1]

我们只需要向 K155ID1 提供一个 5v 电压，然后用 ABCD 4个引脚就可以控制 0-9 号引脚的开关了

### 高压危险
多数单片机最高可输出 5v 电压，而辉光管需要 170v 来驱动，所以升压是必不可少的。如果你有能力设计一个升压电路的话再好不过，如果没有，去淘宝上购买一个升压模块也是不错的选择。需要注意的是辉光管升压模块溢价严重，也免不了有人蓄意炒作，所以大可不必按价格排序买第一个。
<div class="card link-card">
    <div class="card-subwidget card-cover">
        <img src="{% asset_path 170v-boost-module.png %}" class='circle-img'>
    </div>
    <div class="card-subwidget card-content">
        <p>5V-9V 升 170V、160V 小型升压模块</p>
        <a href="https://item.taobao.com/item.htm?id=579392503515" class="button btn-primary">查看</a>
    </div>
</div> 

### 开始接线吧

准备好了单片机、K155ID1 芯片、升压模块，就可以点亮辉光管做一个小 demo 了。我们先用单片机给升压模块和 K155ID1 提供 5v 电压，然后辉光钟阳极引脚**串 20k 电阻后**接升压板 170v 输出，0-9 阴极引脚接 K155ID1 的10个引脚，整个电路就完成了。这里我们要注意 QS-30 里 A 脚是阳极，K 脚是阴极，1 脚和 8 脚悬空。

![图为 QS-30 引脚示意图，视角是以引脚在上][3]

那我的接线就如下图所示：



[1]: k155id1.png
[2]: k155id1-real.jpg
[3]: qs-30.png